schema {
  query: Query
}

scalar Time
scalar Long

# Query defines all API queries
type Query {
  repo(
    owner: String!,
    name: String!,
    host: RepositoryHost = GITHUB,
  ): Repository

  repos(
    owner: String!,
    host: RepositoryHost = GITHUB,
  ): [Repository!]

  burndown(
    repoID: Int!,
    type: BurndownType = GLOBAL,
  ): Burndown
}

# Repositories

type Repository {
  id: Int!
  owner: String!
  name: String!
}

enum RepositoryHost {
  GITHUB
  GITLAB
  BITBUCKET
}

# Burndowns

type Burndown {
  type: BurndownType
  entries: [BurndownEntry!]
}

enum BurndownType {
  GLOBAL
  FILE
  AUTHOR
}

type BurndownEntry {
  start: Time!

  # TODO: add Long type? tbh not sure if int64 is really justified at all here
  # https://gqlgen.com/reference/scalars/#custom-scalars-for-types-you-don-t-control
  bands: [Int!]!
}
